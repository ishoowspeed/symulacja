<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Symulator Meczu 2D</title>
<style>
  body {
    background: radial-gradient(circle at center, #064, #031);
    color: #fff;
    font-family: "Poppins", sans-serif;
    text-align: center;
    margin: 0;
  }
  header {
    display: flex;
    justify-content: center;
    gap: 20px;
    background: rgba(0,0,0,0.4);
    padding: 10px;
  }
  header button {
    background: #007a00;
    border: none;
    border-radius: 8px;
    color: white;
    padding: 10px 20px;
    cursor: pointer;
    transition: 0.3s;
    font-weight: bold;
  }
  header button.active, header button:hover {
    background: #00cc00;
    box-shadow: 0 0 10px #00ff00;
  }
  section { display: none; padding: 20px; }
  section.active { display: block; }

  input, textarea, select, button {
    margin: 5px;
    padding: 8px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
  }
  .team-card {
    background: rgba(0,0,0,0.5);
    border-radius: 10px;
    padding: 15px;
    width: 90%;
    max-width: 500px;
    margin: 10px auto;
  }
  #pitch {
    position: relative;
    width: 800px;
    height: 450px;
    margin: 15px auto;
    background: linear-gradient(to bottom, #006a00, #004d00);
    border: 3px solid white;
    border-radius: 10px;
  }
  .line {
    position: absolute;
    background: white;
  }
  .center-line { width: 2px; height: 100%; left: 50%; top: 0; }
  .circle {
    width: 80px; height: 80px;
    border: 2px solid white;
    border-radius: 50%;
    position: absolute;
    top: calc(50% - 40px); left: calc(50% - 40px);
  }
  .penalty-box {
    position: absolute;
    width: 150px;
    height: 250px;
    border: 2px solid white;
    top: 100px;
  }
  .left-box { left: 0; border-left: none; }
  .right-box { right: 0; border-right: none; }

  .player {
    position: absolute;
    text-align: center;
  }
  .shirt {
    width: 35px; height: 35px;
    border-radius: 50%;
    background: #ff0000;
    margin: 0 auto;
    border: 2px solid white;
  }
  .shirt.B { background: #0044ff; }
  .name {
    font-size: 0.7rem;
    margin-top: 3px;
  }
  .out .shirt {
    opacity: 0.3;
  }
  .cards, .goals {
    position: absolute;
    top: 5px;
    font-size: 0.9rem;
  }
  .cards { left: -25px; }
  .goals { right: -25px; }

  #score { font-size: 2rem; margin-top: 10px; }
  #time { margin: 10px; }
  .log {
    background: rgba(0,0,0,0.6);
    border-radius: 10px;
    padding: 10px;
    width: 90%;
    max-width: 700px;
    height: 230px;
    overflow-y: auto;
    margin: 0 auto;
    text-align: left;
    font-size: 0.9rem;
  }
</style>
</head>
<body>

<header>
  <button class="active" onclick="showTab('teamA')">Dru≈ºyna A</button>
  <button onclick="showTab('teamB')">Dru≈ºyna B</button>
  <button onclick="showTab('match')">Mecz</button>
</header>

<section id="teamA" class="active">
  <div class="team-card">
    <h2>Dru≈ºyna A</h2>
    <input id="teamAName" placeholder="Nazwa klubu A"><br>
    Bramkarz: <input id="teamAGK"><br>
    Obrona: <input id="teamADef"><br>
    Pomoc: <input id="teamAMid"><br>
    Atak: <input id="teamAAtt"><br>
    <button onclick="saveTeam('A')">Zapisz sk≈Çad</button>
  </div>
</section>

<section id="teamB">
  <div class="team-card">
    <h2>Dru≈ºyna B</h2>
    <input id="teamBName" placeholder="Nazwa klubu B"><br>
    Bramkarz: <input id="teamBGK"><br>
    Obrona: <input id="teamBDef"><br>
    Pomoc: <input id="teamBMid"><br>
    Atak: <input id="teamBAtt"><br>
    <button onclick="saveTeam('B')">Zapisz sk≈Çad</button>
  </div>
</section>

<section id="match">
  <h2>üèüÔ∏è Mecz</h2>
  <select id="stadium">
    <option value="homeA">Stadion Klubu A</option>
    <option value="homeB">Stadion Klubu B</option>
    <option value="neutral">Neutralny stadion</option>
  </select>
  <div id="score">0 : 0</div>
  <div id="time">Czas: 0'</div>
  <button onclick="startMatch()">Start</button>
  <button onclick="pauseMatch()">Pauza</button>
  <button onclick="resetMatch()">Reset</button>
  <div id="pitch">
    <div class="line center-line"></div>
    <div class="circle"></div>
    <div class="penalty-box left-box"></div>
    <div class="penalty-box right-box"></div>
  </div>
  <div id="log" class="log"></div>
</section>

<script>
let savedTeams={A:null,B:null},teamA=[],teamB=[];
let scoreA=0,scoreB=0,minute=0,interval=null,paused=false;

function showTab(tab){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.querySelectorAll("header button").forEach(b=>b.classList.remove("active"));
  document.getElementById(tab).classList.add("active");
  document.querySelector(`header button[onclick*="${tab}"]`).classList.add("active");
}

function saveTeam(t){
  const name=document.getElementById(`team${t}Name`).value||("Klub "+t);
  const gk=[document.getElementById(`team${t}GK`).value].filter(x=>x);
  const def=document.getElementById(`team${t}Def`).value.split(",").map(x=>x.trim()).filter(x=>x);
  const mid=document.getElementById(`team${t}Mid`).value.split(",").map(x=>x.trim()).filter(x=>x);
  const att=document.getElementById(`team${t}Att`).value.split(",").map(x=>x.trim()).filter(x=>x);
  savedTeams[t]={name,gk,def,mid,att};
  alert("Zapisano sk≈Çad: "+name);
}

function setupPitch(){
  const pitch=document.getElementById("pitch");
  pitch.innerHTML=`
    <div class='line center-line'></div>
    <div class='circle'></div>
    <div class='penalty-box left-box'></div>
    <div class='penalty-box right-box'></div>`;
  teamA=[];teamB=[];
  buildTeam(savedTeams.A,teamA,true);
  buildTeam(savedTeams.B,teamB,false);
  renderPlayers();
}
function buildTeam(teamObj,arr,left){
  const {gk,def,mid,att}=teamObj;
  const add=(n,pos)=>arr.push({name:n,pos,team:left?"A":"B",yellow:0,red:false,goals:0,active:true});
  gk.forEach(p=>add(p,"GK"));
  def.forEach(p=>add(p,"DEF"));
  mid.forEach(p=>add(p,"MID"));
  att.forEach(p=>add(p,"ATT"));
}
function renderPlayers(){
  const pitch=document.getElementById("pitch");
  const layers={"GK":370,"DEF":290,"MID":190,"ATT":100};
  function draw(team,left){
    const xBase=left?150:650;
    const dir=left?-1:1;
    let i=0;
    team.forEach(p=>{
      const player=document.createElement("div");
      player.className="player "+(p.active?"":"out");
      player.style.top=layers[p.pos]+"px";
      player.style.left=(xBase+dir*(i%4)*70)+"px";
      const shirt=document.createElement("div");
      shirt.className="shirt "+(p.team==="B"?"B":"A");
      const name=document.createElement("div");
      name.className="name"; name.textContent=p.name;
      const cards=document.createElement("div");
      cards.className="cards"; cards.textContent=p.red?"üü•":"üü®".repeat(p.yellow);
      const goals=document.createElement("div");
      goals.className="goals"; goals.textContent="‚öΩ".repeat(p.goals);
      player.append(cards,shirt,goals,name);
      pitch.appendChild(player);
      i++;
    });
  }
  draw(teamA,true);
  draw(teamB,false);
}
function logEvent(t){
  const log=document.getElementById("log");
  log.innerHTML+=`<div>[${minute}'] ${t}</div>`;
  log.scrollTop=log.scrollHeight;
}
function randomEvent(){
  const all=[...teamA.filter(p=>p.active),...teamB.filter(p=>p.active)];
  if(!all.length)return;
  const p=all[Math.floor(Math.random()*all.length)];
  const r=Math.random();
  const akcje=["≈õwietne podanie, ale nie trafia!","gro≈∫na sytuacja, strza≈Ç zablokowany!","mocny strza≈Ç obok s≈Çupka!",
               "b≈Çyskotliwy drybling, ale za d≈Çugo zwleka!","p≈Çaski strza≈Ç, ale bramkarz broni!"];
  const gole=["z dystansu!","g≈Ç√≥wkƒÖ!","po przewrotce!","piƒôkna akcja dru≈ºyny!","mocny strza≈Ç pod poprzeczkƒô!"];
  if(r<0.05) logEvent(`${p.name} (${p.team}) ${akcje[Math.floor(Math.random()*akcje.length)]}`);
  else if(r<0.09){
    p.goals++; if(p.team==="A")scoreA++; else scoreB++;
    logEvent(`‚öΩ ${p.name} (${p.team}) ${gole[Math.floor(Math.random()*gole.length)]}`);
  }
  else if(r<0.11){
    if(p.red||!p.active)return;
    p.yellow++;
    if(p.yellow>=2){p.red=true;p.active=false;logEvent(`üü• ${p.name} (druga ≈º√≥≈Çta - wylatuje!)`);}
    else logEvent(`üü® ${p.name} otrzymuje ≈º√≥≈ÇtƒÖ kartkƒô`);
  }
  document.getElementById("score").innerText=`${scoreA} : ${scoreB}`;
  renderPlayers();
}
function startMatch(){
  if(!savedTeams.A||!savedTeams.B){alert("Ustaw obie dru≈ºyny!");return;}
  if(interval)return;
  setupPitch();
  logEvent("üîî Mecz rozpoczƒôty!");
  interval=setInterval(()=>{
    if(!paused){
      minute++;
      document.getElementById("time").innerText=`Czas: ${minute}'`;
      randomEvent();
      if(minute>=90){clearInterval(interval);interval=null;logEvent(`üèÅ Koniec meczu! Wynik: ${scoreA}-${scoreB}`);}
    }
  },300);
}
function pauseMatch(){paused=!paused;logEvent(paused?"‚è∏Ô∏è Pauza":"‚ñ∂Ô∏è Wznowiono");}
function resetMatch(){
  clearInterval(interval);interval=null;minute=0;scoreA=0;scoreB=0;paused=false;
  document.getElementById("score").innerText="0 : 0";
  document.getElementById("time").innerText="Czas: 0'";
  document.getElementById("log").innerHTML="";
  setupPitch();
}
</script>
</body>
</html>

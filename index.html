# Creating a polished HTML file for the user to download.
html = r'''<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Symulator meczu ‚Äî FIFA style</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1: #06221a;
      --bg2: #0a2c20;
      --panel: rgba(7,12,16,0.75);
      --accent: #39d08a;
      --accent2: #27a46f;
      --muted: #bcd7c4;
      --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family:'Roboto Condensed', Arial, sans-serif;
      color:#eafaf0;
      background: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.02), transparent 4%),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      background-attachment: fixed;
      padding:18px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .container{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:380px 1fr;gap:18px;align-items:start}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
      border-radius:14px;
      padding:16px;
      box-shadow:0 10px 30px rgba(3,8,12,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }
    h1{margin:0 0 10px;font-size:18px}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type=text], select, textarea{
      width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;
      resize:vertical;
    }
    textarea{height:110px}
    .controls{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
    .btn{
      background:linear-gradient(180deg,var(--accent),var(--accent2));
      color:#042015;padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(37,156,108,0.18)
    }
    .btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.06);box-shadow:none}
    .small{font-size:12px;color:var(--muted)}
    .match-card{display:flex;gap:12px;align-items:flex-start}
    .left{flex:1}
    .right{width:360px}
    .scoreboard{
      display:flex;align-items:center;justify-content:space-between;
      background:linear-gradient(180deg,rgba(0,0,0,0.25),rgba(255,255,255,0.02));
      padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);
    }
    .teams{display:flex;gap:12px;align-items:center}
    .team-name{font-weight:700;font-size:16px}
    .score{font-size:48px;font-weight:800;letter-spacing:2px}
    .meta{display:flex;flex-direction:column;align-items:center}
    .minute{font-weight:700;font-size:16px}
    .time-bar{height:8px;background:rgba(255,255,255,0.04);border-radius:6px;overflow:hidden;width:220px;margin-top:8px}
    .time-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#86e6b0);border-radius:6px;transition:width 0.3s linear}

    .feed{margin-top:12px;height:420px;overflow:auto;padding:10px;background:linear-gradient(180deg,rgba(0,0,0,0.18),transparent);border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
    .event{padding:8px;border-radius:8px;margin-bottom:8px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);display:flex;gap:10px;align-items:center}
    .event .min{background:rgba(0,0,0,0.25);padding:6px 8px;border-radius:6px;font-weight:700;color:var(--muted);font-size:13px}

    .players{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    .team-panel{background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02)}
    .player{display:flex;justify-content:space-between;padding:6px;border-radius:6px;font-size:14px}
    .player .icons{min-width:60px;text-align:right}
    .player.goal{background:rgba(57,208,138,0.06)}
    .player.yellow{background:rgba(255,210,110,0.05)}
    .player.red{background:rgba(255,80,80,0.05)}

    .footer{display:flex;gap:8px;align-items:center;margin-top:12px;flex-wrap:wrap}
    .download-note{font-size:13px;color:var(--muted);margin-top:10px}
    @media(max-width:980px){.container{grid-template-columns:1fr}.right{width:auto}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Ustawienia meczu</h1>
      <label>Nazwa klubu Dru≈ºyny A</label>
      <input id="clubA" type="text" value="FC Or≈Çy">

      <label style="margin-top:8px">Nazwa klubu Dru≈ºyny B</label>
      <input id="clubB" type="text" value="FC Wilki">

      <label style="margin-top:8px">Miejsce meczu</label>
      <select id="venue">
        <option value="A">Na stadionie dru≈ºyny A (u siebie)</option>
        <option value="B">Na stadionie dru≈ºyny B (u siebie)</option>
        <option value="neutral">Na neutralnym stadionie</option>
      </select>

      <label style="margin-top:12px">Sk≈Çad Dru≈ºyny A (po jednej nazwie na wiersz)</label>
      <textarea id="teamA">Lewandowski
Koz≈Çowski
Konieczny
Zieli≈Ñski
PiƒÖtek
Nowak
Wi≈õniewski
Kowalski
Kami≈Ñski
Szyma≈Ñski
BƒÖk</textarea>

      <label style="margin-top:10px">Sk≈Çad Dru≈ºyny B (po jednej nazwie na wiersz)</label>
      <textarea id="teamB">Kowalczyk
Piotrowski
G√≥rski
Duda
Szulc
Adamek
Walczak
Zawada
Brzƒôczek
Czarny
Bia≈Çy</textarea>

      <div class="small" style="margin-top:10px">Dodatkowe ustawienia:</div>
      <div class="controls">
        <label class="small"><input type="checkbox" id="penaltyResolve" checked> Rozstrzygaƒá karne po remisie</label>
        <label class="small"><input type="checkbox" id="extraTime"> Doliczony czas (symulacja)</label>
      </div>

      <div style="margin-top:12px">
        <label>Prƒôdko≈õƒá (ms = czas symulowanego 1 minuty)</label>
        <input id="speed" type="range" min="20" max="800" value="100">
        <div class="small">Szybko≈õƒá: <span id="speedVal">100</span> ms/min</div>
      </div>

      <div class="controls" style="margin-top:12px">
        <button id="startBtn" class="btn">Start</button>
        <button id="pauseBtn" class="btn ghost">Pauza</button>
        <button id="resetBtn" class="btn ghost">Reset</button>
      </div>

      <div class="download-note">Po klikniƒôciu <strong>Start</strong> mo≈ºesz obserwowaƒá symulacjƒô. Gotowy plik HTML pobierzesz poni≈ºej.</div>
    </div>

    <div class="card match-card">
      <div class="left">
        <div class="scoreboard" id="scoreboard">
          <div class="teams">
            <div>
              <div class="team-name" id="teamAName">Dru≈ºyna A</div>
              <div class="small" id="teamAClub">FC Or≈Çy</div>
            </div>
            <div style="text-align:center">
              <div class="score"><span id="scoreA">0</span> - <span id="scoreB">0</span></div>
              <div class="meta">
                <div class="minute">Minuta: <span id="minute">0'</span></div>
                <div class="time-bar"><div id="timeFill" class="time-fill"></div></div>
              </div>
            </div>
            <div style="text-align:right">
              <div class="team-name" id="teamBName">Dru≈ºyna B</div>
              <div class="small" id="teamBClub">FC Wilki</div>
            </div>
          </div>
        </div>

        <div class="feed" id="feed"></div>
      </div>

      <div class="right">
        <h1 style="font-size:16px;margin-bottom:8px">Sk≈Çady i statystyki</h1>
        <div class="players">
          <div class="team-panel">
            <div style="font-weight:700;margin-bottom:8px" id="panelAName">Dru≈ºyna A</div>
            <div id="listA"></div>
          </div>
          <div class="team-panel">
            <div style="font-weight:700;margin-bottom:8px" id="panelBName">Dru≈ºyna B</div>
            <div id="listB"></div>
          </div>
        </div>

        <div style="margin-top:12px" class="footer">
          <button id="showSummary" class="btn ghost">Poka≈º podsumowanie</button>
          <a id="downloadLink" class="btn ghost" style="text-decoration:none;color:inherit" download="symulator-meczu.html">Pobierz HTML</a>
        </div>
      </div>
    </div>
  </div>

<script>
  // elements
  const teamAText=document.getElementById('teamA'), teamBText=document.getElementById('teamB');
  const startBtn=document.getElementById('startBtn'), pauseBtn=document.getElementById('pauseBtn'), resetBtn=document.getElementById('resetBtn');
  const feed=document.getElementById('feed'), minuteEl=document.getElementById('minute');
  const scoreAEl=document.getElementById('scoreA'), scoreBEl=document.getElementById('scoreB');
  const listA=document.getElementById('listA'), listB=document.getElementById('listB');
  const speedInput=document.getElementById('speed'), speedVal=document.getElementById('speedVal');
  const penaltyResolve=document.getElementById('penaltyResolve'), extraTime=document.getElementById('extraTime');
  const clubAEl=document.getElementById('clubA'), clubBEl=document.getElementById('clubB'), venueEl=document.getElementById('venue');
  const teamAClub=document.getElementById('teamAClub'), teamBClub=document.getElementById('teamBClub');
  const panelAName=document.getElementById('panelAName'), panelBName=document.getElementById('panelBName');
  const timeFill=document.getElementById('timeFill'), downloadLink=document.getElementById('downloadLink');

  let teamA=[], teamB=[];
  let minute=0, timer=null, running=false, scoreA=0, scoreB=0, events=[];
  let stats={A:{goals:[],yellow:[],red:[]},B:{goals:[],yellow:[],red:[]}};
  let homeAdvantage={A:1,B:1};

  function parseTeams(){
    teamA=teamAText.value.split('\\n').map(s=>s.trim()).filter(Boolean);
    teamB=teamBText.value.split('\\n').map(s=>s.trim()).filter(Boolean);
    if(teamA.length===0) teamA.push('Brak zawodnik√≥w A');
    if(teamB.length===0) teamB.push('Brak zawodnik√≥w B');
    renderPlayers();
  }

  function renderPlayers(){
    listA.innerHTML=''; teamA.forEach((p,i)=>{const div=document.createElement('div');div.className='player';div.id='A-'+i;div.innerHTML=`<div>${i+1}. ${escapeHtml(p)}</div><div class="icons" id="Astat-${i}"></div>`;listA.appendChild(div)});
    listB.innerHTML=''; teamB.forEach((p,i)=>{const div=document.createElement('div');div.className='player';div.id='B-'+i;div.innerHTML=`<div>${i+1}. ${escapeHtml(p)}</div><div class="icons" id="Bstat-${i}"></div>`;listB.appendChild(div)});
    teamAClub.innerText = clubAEl.value || 'Dru≈ºyna A'; teamBClub.innerText = clubBEl.value || 'Dru≈ºyna B';
    panelAName.innerText = clubAEl.value || 'Dru≈ºyna A'; panelBName.innerText = clubBEl.value || 'Dru≈ºyna B';
  }

  function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

  function startMatch(){
    if(running) return;
    parseTeams();
    running=true; startBtn.disabled=true; pauseBtn.disabled=false;
    minute=0; scoreA=0; scoreB=0; events=[];
    stats={A:{goals:[],yellow:[],red:[]},B:{goals:[],yellow:[],red:[]}};
    feed.innerHTML=''; updateScore(); updateMinute();
    addEvent(0,`Rozpoczƒôcie meczu ‚Äî ${clubAEl.value} vs ${clubBEl.value}`);
    setVenueAdvantage();
    scheduleStep();
  }

  function setVenueAdvantage(){
    const v=venueEl.value;
    if(v==='A'){ homeAdvantage={A:1.12,B:0.92}; addEvent(0,`${clubAEl.value} gra u siebie ‚Äî lekka przewaga.`); }
    else if(v==='B'){ homeAdvantage={A:0.92,B:1.12}; addEvent(0,`${clubBEl.value} gra u siebie ‚Äî lekka przewaga.`); }
    else { homeAdvantage={A:1,B:1}; addEvent(0,'Neutralny stadion ‚Äî bez przewagi.'); }
  }

  function scheduleStep(){ const ms=Number(speedInput.value)||100; timer=setTimeout(stepMinute,ms); }

  function stepMinute(){ if(!running) return; minute++; updateMinute(); simulateMinute(minute); if(minute<90) scheduleStep(); else finishRegularTime(); }

  function simulateMinute(m){
    const base=0.22;
    if(Math.random() < base){
      const r=Math.random();
      // bias probability by homeAdvantage relative weights (simple)
      const weightA = homeAdvantage.A, weightB = homeAdvantage.B;
      const chooseTeam = ()=> Math.random() < (weightA/(weightA+weightB)) ? 'A' : 'B';
      if(r < 0.45){ const team = chooseTeam(); goalEvent(team,m); }
      else if(r < 0.7){ const team = Math.random()<0.5 ? 'A' : 'B'; cardEvent(team,'yellow',m); }
      else if(r < 0.82){ const team = Math.random()<0.5 ? 'A' : 'B'; cardEvent(team,'red',m); }
      else if(r < 0.92){ const team = Math.random()<0.5 ? 'A' : 'B'; penaltyEvent(team,m); }
      else { subOrMiss(Math.random()<0.5?'A':'B',m); }
    } else {
      if(Math.random() < 0.08){
        const team = Math.random()<0.5 ? 'A' : 'B';
        addEvent(m,`Szansa dla dru≈ºyny ${team==='A'? clubAEl.value : clubBEl.value} ‚Äî strza≈Ç, ale bez bramki.`);
      }
    }
  }

  function pickPlayer(team){ if(team==='A') return {name: teamA[Math.floor(Math.random()*teamA.length)], idx: Math.floor(Math.random()*teamA.length)}; return {name: teamB[Math.floor(Math.random()*teamB.length)], idx: Math.floor(Math.random()*teamB.length)}; }

  function goalEvent(team,m){
    const p = pickPlayer(team);
    const club = team==='A'? clubAEl.value : clubBEl.value;
    // slight modifier: homeAdvantage increases chance to score reflected already in team selection
    if(team==='A'){ scoreA++; stats.A.goals.push({player:p.name,minute:m}); } else { scoreB++; stats.B.goals.push({player:p.name,minute:m}); }
    updateScore();
    addEvent(m,`‚öΩ Bramk! ${p.name} (${club}) ‚Äî strza≈Ç z akcji.`);
    markPlayer(team,p.idx,'goal');
  }

  function cardEvent(team,type,m){
    const p = pickPlayer(team);
    if(type==='yellow'){ if(team==='A') stats.A.yellow.push({player:p.name,minute:m}); else stats.B.yellow.push({player:p.name,minute:m}); addEvent(m,`üü® Kartka: ${p.name} ‚Äî ≈ª√ì≈ÅTA karta.`); markPlayer(team,p.idx,'yellow'); }
    else { if(team==='A') stats.A.red.push({player:p.name,minute:m}); else stats.B.red.push({player:p.name,minute:m}); addEvent(m,`üü• Kartka: ${p.name} ‚Äî CZERWONA karta!`); markPlayer(team,p.idx,'red'); }
  }

  function penaltyEvent(team,m){
    const attacker = pickPlayer(team);
    addEvent(m,`Rzut karny dla ${team==='A'? clubAEl.value : clubBEl.value} ‚Äî wykona ${attacker.name}.`);
    const scoreChance = 0.78;
    const scored = Math.random() < scoreChance;
    setTimeout(()=>{
      if(scored){
        if(team==='A'){ scoreA++; stats.A.goals.push({player:attacker.name,minute:m+' (k)'}); } else { scoreB++; stats.B.goals.push({player:attacker.name,minute:m+' (k)'}); }
        updateScore();
        addEvent(m,`GOOOL z karnego! ${attacker.name} trafia.`);
        markPlayer(team,attacker.idx,'goal');
      } else addEvent(m,'Karny nie trafiony ‚Äî bramkarz lub s≈Çupek ratuje.');
    }, Number(speedInput.value)*0.8);
  }

  function subOrMiss(team,m){
    if(Math.random() < 0.5){ const p = pickPlayer(team); addEvent(m,`Strza≈Ç obok lub obrona ‚Äî ${p.name} nie trafia.`); } else { const pOut = pickPlayer(team); addEvent(m,`Zmiana w dru≈ºynie ${team==='A'? clubAEl.value : clubBEl.value}: ${pOut.name} -> Zmiennik.`); }
  }

  function markPlayer(team,idx,cls){
    const id = (team==='A'? 'A-':'B-')+idx;
    const el = document.getElementById(id);
    if(!el) return;
    el.classList.add(cls);
    const stat = document.getElementById((team==='A'? 'Astat-':'Bstat-')+idx);
    if(!stat) return;
    if(cls==='goal') stat.innerText = (stat.innerText? stat.innerText+' ':'') + '‚öΩ';
    if(cls==='yellow') stat.innerText = (stat.innerText? stat.innerText+' ':'') + 'üü®';
    if(cls==='red') stat.innerText = (stat.innerText? stat.innerText+' ':'') + 'üü•';
  }

  function addEvent(min,text){
    const div=document.createElement('div'); div.className='event';
    div.innerHTML = `<div class="min">${min}'</div><div style="flex:1">${escapeHtml(text)}</div>`;
    feed.prepend(div); events.push({minute:min,text}); // keep log
  }

  function updateScore(){ scoreAEl.innerText = scoreA; scoreBEl.innerText = scoreB; updateTimeFill(); }
  function updateMinute(){ minuteEl.innerText = minute + \"'\"; updateTimeFill(); }
  function updateTimeFill(){ const pct = Math.min(100, Math.round((minute/90)*100)); timeFill.style.width = pct + '%'; }

  function finishRegularTime(){
    running=false; startBtn.disabled=false; pauseBtn.disabled=true;
    addEvent(90,'Koniec regulaminowego czasu gry.');
    if(extraTime.checked){
      const added = Math.floor(Math.random()*5)+1;
      addEvent(90+added,`Sƒôdzia dolicza ${added} minut.`);
      minute = 90;
      let extra = 0;
      const doExtra = ()=>{ extra++; minute = 90+extra; updateMinute(); simulateMinute(minute); if(extra < added) setTimeout(doExtra, Number(speedInput.value)); else finalDecide(); }
      setTimeout(doExtra, Number(speedInput.value));
    } else finalDecide();
  }

  function finalDecide(){
    if(scoreA===scoreB && penaltyResolve.checked){
      addEvent(minute, 'Remis ‚Äî rozstrzygamy karne!');
      setTimeout(()=>penaltyShootout(), Number(speedInput.value));
    } else addEvent(minute, `KONIEC MECZU ‚Äî wynik ${scoreA} : ${scoreB}`);
  }

  function penaltyShootout(){
    const kicks = 5; let a=0,b=0; const log=[];
    for(let i=0;i<kicks;i++){
      const pa = teamA[Math.floor(Math.random()*teamA.length)];
      const pb = teamB[Math.floor(Math.random()*teamB.length)];
      const ra = Math.random() < 0.78; const rb = Math.random() < 0.78;
      if(ra){ a++; log.push(`A: ${pa} - gol`);} else log.push(`A: ${pa} - pud≈Ço`);
      if(rb){ b++; log.push(`B: ${pb} - gol`);} else log.push(`B: ${pb} - pud≈Ço`);
    }
    let sd = 0;
    while(a===b){
      sd++;
      const pa = teamA[Math.floor(Math.random()*teamA.length)];
      const pb = teamB[Math.floor(Math.random()*teamB.length)];
      const ra = Math.random() < 0.78; const rb = Math.random() < 0.78;
      if(ra) a++; if(rb) b++;
      log.push(`SD A: ${pa} - ${ra? 'gol':'pud≈Ço'}`); log.push(`SD B: ${pb} - ${rb? 'gol':'pud≈Ço'}`);
      if(sd>20) break;
    }
    addEvent(minute, `KARNE: ${a} : ${b}`);
    log.forEach(l=>addEvent(minute, l));
    addEvent(minute, `KONIEC po karnych ‚Äî wynik ko≈Ñcowy ${scoreA} (${a}) : ${scoreB} (${b})`);
  }

  // controls
  startBtn.addEventListener('click', startMatch);
  pauseBtn.addEventListener('click', ()=>{ if(!running){ running=true; pauseBtn.innerText='Pauza'; scheduleStep(); } else { running=false; pauseBtn.innerText='Wzn√≥w'; clearTimeout(timer); } });
  resetBtn.addEventListener('click', ()=>{ clearTimeout(timer); running=false; minute=0; scoreA=0; scoreB=0; events=[]; feed.innerHTML=''; updateMinute(); updateScore(); renderPlayers(); startBtn.disabled=false; pauseBtn.disabled=true; pauseBtn.innerText='Pauza'; addEvent(0,'Mecz zresetowany.'); });

  speedInput.addEventListener('input', ()=>{ speedVal.innerText = speedInput.value; });

  showSummary.addEventListener('click', ()=>{
    const parts=[];
    parts.push(`Wynik: ${scoreA} : ${scoreB}`);
    parts.push('Bramki A: ' + (stats.A.goals.length? stats.A.goals.map(g=>`${g.player} (${g.minute})`).join(', ') : 'brak'));
    parts.push('Bramki B: ' + (stats.B.goals.length? stats.B.goals.map(g=>`${g.player} (${g.minute})`).join(', ') : 'brak'));
    alert(parts.join('\\n'));
  });

  // prepare download: create blob and attach to download link
  function prepareDownload(){
    const htmlContent = document.documentElement.outerHTML;
    const blob = new Blob([htmlContent], {type: 'text/html'});
    const url = URL.createObjectURL(blob);
    downloadLink.href = url;
  }

  // initial
  parseTeams();
  pauseBtn.disabled=true;
  speedVal.innerText = speedInput.value;
  addEvent(0,'Gotowy do symulacji.');
  prepareDownload();

  // update download whenever user changes big inputs (so file includes latest names)
  [teamAText,teamBText,clubAEl,clubBEl,venueEl].forEach(el=>el.addEventListener('input', prepareDownload));
</script>
</body>
</html>
'''

# write file
path = "/mnt/data/symulator-meczu.html"
with open(path, "w", encoding="utf-8") as f:
    f.write(html)

path
